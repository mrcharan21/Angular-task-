<div class="container-fluid mt-5 px-3 px-md-5">

  <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4 gap-3">
    <h3 class="mb-0 fw-bold text-dark">User Details</h3>
    <button class="btn btn-danger btn-sm px-4" (click)="logout()">Logout</button>
  </div>

  <!-- FORM -->
  <form [formGroup]="userForm" class="row g-3">

    <!-- NAME -->
    <div class="col-md-4">
      <input
        type="text"
        class="form-control"
        placeholder="Name"
        formControlName="name">

      <small class="text-danger"
        *ngIf="f['name']?.touched && f['name']?.errors?.['required']">
        Please enter name
      </small>
    </div>

    <!-- EMAIL -->
    <div class="col-md-4">
      <input
        type="email"
        class="form-control"
        placeholder="Email"
        formControlName="email">

      <small class="text-danger"
        *ngIf="f['email']?.touched && f['email']?.errors?.['required']">
        Please enter email
      </small>

      <small class="text-danger"
        *ngIf="f['email']?.touched && f['email']?.errors?.['email']">
        Please enter valid email
      </small>
    </div>

    <!-- AGE (SELECT BOX) -->
    <div class="col-md-2">
      <select class="form-select" formControlName="age">
        <option value="">Select Age</option>
        <option *ngFor="let age of ages" [value]="age">
          {{ age }}
        </option>
      </select>

      <small class="text-danger"
        *ngIf="f['age']?.touched && f['age']?.errors?.['required']">
        Please select age
      </small>

      <small class="text-danger"
        *ngIf="f['age']?.touched && f['age']?.errors?.['min']">
        Age must be above 1
      </small>
    </div>

    <!-- ADD BUTTON -->
    <div class="col-md-2">
      <button
        type="button"
        class="btn btn-success w-100"
        (click)="addUser()">
        Add
      </button>
    </div>

  </form>

  <!-- TABLE -->
  <table class="table table-bordered table-striped mt-4" *ngIf="users.length > 0">
    <thead class="table-dark text-center">
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Age</th>
        <th>Action</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let u of users; let i = index" class="text-center">
        <td>{{ u.name }}</td>
        <td>{{ u.email }}</td>
        <td >{{ u.age }}</td>
        <td class="text-center">
          <button class="btn btn-sm btn-danger" (click)="deleteUser(i)">
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="alert alert-info text-center mt-4" *ngIf="users.length === 0">
    No data available
  </div>

</div>
